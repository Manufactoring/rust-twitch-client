language: rust
rust:
  - stable
  - beta
  - nightly
matrix:
  allow_failures:
    - rust: nightly
before_script:
  - rustc --verbose --version
  - cargo --version
branches:
  only:
    - master
after_success: |
  [ $TRAVIS_BRANCH = master ] &&
  [ $TRAVIS_PULL_REQUEST = false ] &&
  cargo doc --no-deps &&
  echo "<meta http-equiv=refresh content=0;url=twitch_client/index.html>" > target/doc/index.html &&
  sudo pip install ghp-import &&
  ghp-import -n target/doc &&
  git push -fq https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git gh-pages
env:
  global:
    - secure: EPmJ5CTpVfAJSdWkSr8s/NtzzVAxxeta+iUhGNGlX55OdeIN/0+/uaEV3nh99Tx3o6cjTY2oYZVfn0pvjInwj5wu+xedSrCpKCfMXxY/FzGvbmjpQUsTZPQI7Lg3ScDjmGUd+sSUOVfJt56hbwvwYdRa38eMTL682wxHSMIwnez54W8feS5uGpIl5m+/uXmgetKH1ymPelTNayE+BoI84h4u9M6pTvPVMmdXq9P6c+Lw5dtIT66iSewVWm5KxuMhD78Gk7FQI56W8pbAvR20EkSuEtHeX8gjOXNpy2aOio17ZkbQXgTcTLlhiS0CnEjzNUmbQFjIj09xgYIDrSS8B59eRqCaqQcpUJfQTIJl5cYiLkxxUdMoOTizMK4zkkiDU8i6vhEx6Da4lfWUekEu9dfhnp0vlojkk6mklWxgqvRlP2swvMwBCHWjMnd2cL9pEM6M/qUABJW6aw2KC7S+z4kXc1Y0ImXY7u0xXqA2aMRNUjaS8dXWFEWkuu8Hgdmln61J7z0fq+o7w8uIAHUReJF6T56yirTCD/diR8x5I8vANz/BLLiIk/+U2EMHhEFa9MM9JaSr7bPgUsPHbvgcnsRVTOrujBaDE8MD23R6+5R1NBf+DJ/gTnFvB5BSOUxzYcfy8S8NbvPDJ94B3/0WY08en/XZC0nX25ZTotvjsnk=
    - secure: dNEAJhHC8GdaCAMcX/h07qZiuWpUWKw9hB3utazgVT+e0WJfWRvW4TmXZeWKignK/pmONoynWzG4o7VpZlNP6hTMuIh0cXIKykdSeV+J/JXMjYT7QMnyTOl6hKJok1O5aCvMoAHCozqE0zPe/eBaffNr0LIoKBbUM6A69IGaip7RDNw9RIGw9A+lM5GnXL7fHRGxl5Vupr1fImSpdLlUHuJCZpV1uQtjIC/2xJ0hhx2aG3bWvC8m2mtSls1y64TV/6poAT4h9PM9+B5Mx+xTwKpulA0sKB1AZcjPYwI/jEm00ov7l73m42PLuHsf+OUAx1/YfpaUMb4LGP/8KxTHA+wtZfNi2IpIifwDR8P57F8H5cEEFNskVSEXigGGdsNubFZB1BHgl4M5cy+wDk+SIAt5x99Xju5ciglfb48WHMJQ+CwxLVbKUuGfw93aJvBtIeVsQbBvH8x8MiABwfLhMGwepDnnNH50DHpajA61cZYfz4x8/lzaumcr7blw8R7RIJg0/eNhgSgtd5Uqd+m/3XxU9JkQQVYZYmjV4cCpp5iZ2PSj+o3NyWfD89lxWvJ8RYf14pUTUkSeqP9pur4ljs/JGbbhw2+FoxVF9dtMLgh4KCX3/LlzlF7a9i92n3Sz3Hu008lp39Eqi+tq5U3dm/8vaUoKLidSyU7X/z2plCw=
